<form id="new_document_attachment" method="get">
  <div class="actions"><input type="submit" name="commit" value="Submit" /></div>
  <input type="file" id="document_attachment_doc" />
</form>


 <script type="text/javascript">
const form = document.getElementById("new_document_attachment");
const fileInput = document.getElementById("document_attachment_doc");

fileInput.addEventListener('change', () => {
  form.submit();
});

window.addEventListener('paste', e => {
  fileInput.files = e.clipboardData.files;
  setPreviewImage(e.clipboardData.files[0]);
});


function setPreviewImage(file) {
	const fileReader = new FileReader();
	
	fileReader.readAsDataURL(file);
	fileReader.onload = () => {
		console.log(fileReader.result);
	}
}
 </script>
